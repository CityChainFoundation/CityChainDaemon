<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Class QualityScore
   | City Chain: Developer Reference </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Class QualityScore
   | City Chain: Developer Reference ">
    <meta name="generator" content="docfx 2.39.1.0">
    
    <link rel="shortcut icon" href="../images/favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../images/icon.png" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="Stratis.Bitcoin.BlockPulling.QualityScore">
  
  
  <h1 id="Stratis_Bitcoin_BlockPulling_QualityScore" data-uid="Stratis.Bitcoin.BlockPulling.QualityScore" class="text-break">Class QualityScore
  </h1>
  <div class="markdown level0 summary"><p>Implements logic of evaluation of quality of node network peers based on
the recent past experience with them with respect to other node's network peers.</p>
</div>
  <div class="markdown level0 conceptual"></div>
  <div class="inheritance">
    <h5>Inheritance</h5>
    <div class="level0"><span class="xref">System.Object</span></div>
    <div class="level1"><span class="xref">QualityScore</span></div>
  </div>
  <h6><strong>Namespace</strong>: <a class="xref" href="Stratis.Bitcoin.BlockPulling.html">Stratis.Bitcoin.BlockPulling</a></h6>
  <h6><strong>Assembly</strong>: Stratis.Bitcoin.dll</h6>
  <h5 id="Stratis_Bitcoin_BlockPulling_QualityScore_syntax">Syntax</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public class QualityScore : object</code></pre>
  </div>
  <h5 id="Stratis_Bitcoin_BlockPulling_QualityScore_remarks"><strong>Remarks</strong></h5>
  <div class="markdown level0 remarks"><p>Each peer is assigned with a quality score, which is a floating point number between
<a class="xref" href="Stratis.Bitcoin.BlockPulling.QualityScore.html#Stratis_Bitcoin_BlockPulling_QualityScore_MinScore">MinScore</a> and <a class="xref" href="Stratis.Bitcoin.BlockPulling.QualityScore.html#Stratis_Bitcoin_BlockPulling_QualityScore_MaxScore">MaxScore</a> inclusive. Each peer starts with
the score in the middle of the score interval. The higher the score, the better the peer
and the better chance for the peer to get more work assigned.</p>
</div>
  <h3 id="constructors">Constructors
  </h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/CityChainFoundation/city-chain/new/master/docs-ref-overwrite/new?filename=Stratis_Bitcoin_BlockPulling_QualityScore__ctor_System_Int32_ILoggerFactory_.md&amp;value=---%0Auid%3A%20Stratis.Bitcoin.BlockPulling.QualityScore.%23ctor(System.Int32%2CILoggerFactory)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/CityChainFoundation/city-chain/blob/master/src/Stratis.Bitcoin/BlockPulling/QualityScore.cs/#L70">View Source</a>
  </span>
  <a id="Stratis_Bitcoin_BlockPulling_QualityScore__ctor_" data-uid="Stratis.Bitcoin.BlockPulling.QualityScore.#ctor*"></a>
  <h4 id="Stratis_Bitcoin_BlockPulling_QualityScore__ctor_System_Int32_ILoggerFactory_" data-uid="Stratis.Bitcoin.BlockPulling.QualityScore.#ctor(System.Int32,ILoggerFactory)">QualityScore(Int32, ILoggerFactory)</h4>
  <div class="markdown level1 summary"><p>Initializes a new instance of the object.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public QualityScore(int maxSampleCount, ILoggerFactory loggerFactory)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Int32</span></td>
        <td><span class="parametername">maxSampleCount</span></td>
        <td><p>Maximal number of samples we calculate statistics from.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">ILoggerFactory</span></td>
        <td><span class="parametername">loggerFactory</span></td>
        <td><p>Factory to be used to create logger for the puller.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h3 id="fields">Fields
  </h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/CityChainFoundation/city-chain/new/master/docs-ref-overwrite/new?filename=Stratis_Bitcoin_BlockPulling_QualityScore_MaxScore.md&amp;value=---%0Auid%3A%20Stratis.Bitcoin.BlockPulling.QualityScore.MaxScore%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/CityChainFoundation/city-chain/blob/master/src/Stratis.Bitcoin/BlockPulling/QualityScore.cs/#L36">View Source</a>
  </span>
  <h4 id="Stratis_Bitcoin_BlockPulling_QualityScore_MaxScore" data-uid="Stratis.Bitcoin.BlockPulling.QualityScore.MaxScore">MaxScore</h4>
  <div class="markdown level1 summary"><p>Maximal quality score of a peer node based on the node's past experience with the peer node.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public const double MaxScore = null</code></pre>
  </div>
  <h5 class="fieldValue">Field Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Double</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/CityChainFoundation/city-chain/new/master/docs-ref-overwrite/new?filename=Stratis_Bitcoin_BlockPulling_QualityScore_MinScore.md&amp;value=---%0Auid%3A%20Stratis.Bitcoin.BlockPulling.QualityScore.MinScore%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/CityChainFoundation/city-chain/blob/master/src/Stratis.Bitcoin/BlockPulling/QualityScore.cs/#L33">View Source</a>
  </span>
  <h4 id="Stratis_Bitcoin_BlockPulling_QualityScore_MinScore" data-uid="Stratis.Bitcoin.BlockPulling.QualityScore.MinScore">MinScore</h4>
  <div class="markdown level1 summary"><p>Minimal quality score of a peer node based on the node's past experience with the peer node.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public const double MinScore = null</code></pre>
  </div>
  <h5 class="fieldValue">Field Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Double</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h3 id="properties">Properties
  </h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/CityChainFoundation/city-chain/new/master/docs-ref-overwrite/new?filename=Stratis_Bitcoin_BlockPulling_QualityScore_AverageBlockTimePerKb.md&amp;value=---%0Auid%3A%20Stratis.Bitcoin.BlockPulling.QualityScore.AverageBlockTimePerKb%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/CityChainFoundation/city-chain/blob/master/src/Stratis.Bitcoin/BlockPulling/QualityScore.cs/#L51">View Source</a>
  </span>
  <a id="Stratis_Bitcoin_BlockPulling_QualityScore_AverageBlockTimePerKb_" data-uid="Stratis.Bitcoin.BlockPulling.QualityScore.AverageBlockTimePerKb*"></a>
  <h4 id="Stratis_Bitcoin_BlockPulling_QualityScore_AverageBlockTimePerKb" data-uid="Stratis.Bitcoin.BlockPulling.QualityScore.AverageBlockTimePerKb">AverageBlockTimePerKb</h4>
  <div class="markdown level1 summary"><p>Average time of a block download among the samples kept in <span class="xref">Stratis.Bitcoin.BlockPulling.QualityScore.samples</span> array.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public double AverageBlockTimePerKb { get; }</code></pre>
  </div>
  <h5 class="propertyValue">Property Value</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Double</span></td>
        <td></td>
      </tr>
    </tbody>
  </table>
  <h5 id="Stratis_Bitcoin_BlockPulling_QualityScore_AverageBlockTimePerKb_remarks">Remarks</h5>
  <div class="markdown level1 remarks"><p>Write access to this object has to be protected by <span class="xref">Stratis.Bitcoin.BlockPulling.QualityScore.lockObject</span>.</p>
<p>
Public getter allows better testing of the class.
</p>
</div>
  <h3 id="methods">Methods
  </h3>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/CityChainFoundation/city-chain/new/master/docs-ref-overwrite/new?filename=Stratis_Bitcoin_BlockPulling_QualityScore_AddSample_Stratis_Bitcoin_BlockPulling_IBlockPullerBehavior_System_Int64_System_Int32_.md&amp;value=---%0Auid%3A%20Stratis.Bitcoin.BlockPulling.QualityScore.AddSample(Stratis.Bitcoin.BlockPulling.IBlockPullerBehavior%2CSystem.Int64%2CSystem.Int32)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/CityChainFoundation/city-chain/blob/master/src/Stratis.Bitcoin/BlockPulling/QualityScore.cs/#L86">View Source</a>
  </span>
  <a id="Stratis_Bitcoin_BlockPulling_QualityScore_AddSample_" data-uid="Stratis.Bitcoin.BlockPulling.QualityScore.AddSample*"></a>
  <h4 id="Stratis_Bitcoin_BlockPulling_QualityScore_AddSample_Stratis_Bitcoin_BlockPulling_IBlockPullerBehavior_System_Int64_System_Int32_" data-uid="Stratis.Bitcoin.BlockPulling.QualityScore.AddSample(Stratis.Bitcoin.BlockPulling.IBlockPullerBehavior,System.Int64,System.Int32)">AddSample(IBlockPullerBehavior, Int64, Int32)</h4>
  <div class="markdown level1 summary"><p>Adds new time of a block to the list of times of recently downloaded blocks.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public void AddSample(IBlockPullerBehavior peer, long blockDownloadTimeMs, int blockSize)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><a class="xref" href="Stratis.Bitcoin.BlockPulling.IBlockPullerBehavior.html">IBlockPullerBehavior</a></td>
        <td><span class="parametername">peer</span></td>
        <td><p>Peer that downloaded the block.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Int64</span></td>
        <td><span class="parametername">blockDownloadTimeMs</span></td>
        <td><p>Time in milliseconds it took to download the block from the peer.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Int32</span></td>
        <td><span class="parametername">blockSize</span></td>
        <td><p>Size of the downloaded block in bytes.</p>
</td>
      </tr>
    </tbody>
  </table>
  <span class="small pull-right mobile-hide">
    <span class="divider">|</span>
    <a href="https://github.com/CityChainFoundation/city-chain/new/master/docs-ref-overwrite/new?filename=Stratis_Bitcoin_BlockPulling_QualityScore_CalculateQualityAdjustment_System_Int64_System_Int32_.md&amp;value=---%0Auid%3A%20Stratis.Bitcoin.BlockPulling.QualityScore.CalculateQualityAdjustment(System.Int64%2CSystem.Int32)%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A">Improve this Doc</a>
  </span>
  <span class="small pull-right mobile-hide">
    <a href="https://github.com/CityChainFoundation/city-chain/blob/master/src/Stratis.Bitcoin/BlockPulling/QualityScore.cs/#L128">View Source</a>
  </span>
  <a id="Stratis_Bitcoin_BlockPulling_QualityScore_CalculateQualityAdjustment_" data-uid="Stratis.Bitcoin.BlockPulling.QualityScore.CalculateQualityAdjustment*"></a>
  <h4 id="Stratis_Bitcoin_BlockPulling_QualityScore_CalculateQualityAdjustment_System_Int64_System_Int32_" data-uid="Stratis.Bitcoin.BlockPulling.QualityScore.CalculateQualityAdjustment(System.Int64,System.Int32)">CalculateQualityAdjustment(Int64, Int32)</h4>
  <div class="markdown level1 summary"><p>Calculates adjustment of peer's quality score when it finished downloading a block.</p>
</div>
  <div class="markdown level1 conceptual"></div>
  <h5 class="decalaration">Declaration</h5>
  <div class="codewrapper">
    <pre><code class="lang-csharp hljs">public double CalculateQualityAdjustment(long blockDownloadTimeMs, int blockSize)</code></pre>
  </div>
  <h5 class="parameters">Parameters</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Name</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Int64</span></td>
        <td><span class="parametername">blockDownloadTimeMs</span></td>
        <td><p>Time in milliseconds it took to download the block from the peer.</p>
</td>
      </tr>
      <tr>
        <td><span class="xref">System.Int32</span></td>
        <td><span class="parametername">blockSize</span></td>
        <td><p>Size of the downloaded block in bytes.</p>
</td>
      </tr>
    </tbody>
  </table>
  <h5 class="returns">Returns</h5>
  <table class="table table-bordered table-striped table-condensed">
    <thead>
      <tr>
        <th>Type</th>
        <th>Description</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td><span class="xref">System.Double</span></td>
        <td><p>Quality score adjustment for the peer.</p>
</td>
      </tr>
    </tbody>
  </table>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/CityChainFoundation/city-chain/new/master/docs-ref-overwrite/new?filename=Stratis_Bitcoin_BlockPulling_QualityScore.md&amp;value=---%0Auid%3A%20Stratis.Bitcoin.BlockPulling.QualityScore%0Asummary%3A%20'*You%20can%20override%20summary%20for%20the%20API%20here%20using%20*MARKDOWN*%20syntax'%0A---%0A%0A*Please%20type%20below%20more%20information%20about%20this%20API%3A*%0A%0A" class="contribution-link">Improve this Doc</a>
                  </li>
                  <li>
                    <a href="https://github.com/CityChainFoundation/city-chain/blob/master/src/Stratis.Bitcoin/BlockPulling/QualityScore.cs/#L30" class="contribution-link">View Source</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
              <!-- <p><a class="back-to-top" href="#top">Back to top</a><p> -->
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            <a href='https://city-chain.org'>city-chain.org</a> | <a href='https://citychain.foundation'>citychain.foundation</a>
            
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
